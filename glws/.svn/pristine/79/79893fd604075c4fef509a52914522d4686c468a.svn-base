<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
	<th:block th:include="include :: header('数据同步列表')" />
</head>
<body class="gray-bg">
	<div class="row">
		<div class="col-sm-12">
			<div class="tabs-container">
				<ul class="nav nav-tabs">
					<li class="active"><a data-toggle="tab" href="#tab-1" aria-expanded="true">检测数据</a>
					</li>
					<li class=""><a data-toggle="tab" href="#tab-2" aria-expanded="false">气象数据</a>
					</li>
				</ul>
				<div class="tab-content" style="width: 100%;height: 100%;">
					<div id="tab-1" class="tab-pane active">
						<div class="panel-body">
							<form id="form-datasync-add" name="form-datasync-add">
								<div class="select-list">
									<ul>
										<li>
											<div class="form-group">
												<label class="col-sm-3 control-label">执行策略：</label>
												<div class="col-sm-12">
													<label class="radio-box"> <input type="radio" name="misfirePolicy" value="1" th:checked="true"/> 立即执行 </label>
													<label class="radio-box"> <input type="radio" name="misfirePolicy" value="2" /> 执行一次 </label>
													<label class="radio-box"> <input type="radio" name="misfirePolicy" value="3" /> 放弃执行 </label>
												</div>
											</div>
										</li>

										<!--<li>-->
										<!--数据源：-->
										<!--<select >-->
										<!--<option value="">请选择数据源</option>-->
										<!--<option value="bch">病虫害数据库</option>-->
										<!--<option value="gc">工程数据库</option>-->
										<!--<option value="stjc">生态检测数据库</option>-->
										<!--</select>-->
										<!--</li>-->
										<li>
											<a class="btn btn-primary btn-rounded btn-sm" onclick="$.table.add()"><i class="fa fa-search"></i>&nbsp;开始</a>
											<a class="btn btn-warning btn-rounded btn-sm" onclick="$.form.reset()"><i class="fa fa-refresh"></i>&nbsp;重置</a>
										</li>
									</ul>
								</div>
							</form>
							<div class="col-sm-12 select-table table-striped">
								<table id="bootstrap-table"></table>
							</div>
						</div>
					</div>
					<div id="tab-2" class="tab-pane">
						<div class="panel-body">
							<form id="form-datasync-add2" name="form-datasync-add">
								<div class="select-list">
									<ul>
										<li>
											<div class="form-group">
												<label class="col-sm-3 control-label">执行策略：</label>
												<div class="col-sm-12">
													<label class="radio-box"> <input type="radio" name="misfirePolicy" value="1" th:checked="true"/> 立即执行 </label>
													<label class="radio-box"> <input type="radio" name="misfirePolicy" value="2" /> 执行一次 </label>
													<label class="radio-box"> <input type="radio" name="misfirePolicy" value="3" /> 放弃执行 </label>
												</div>
											</div>
										</li>

										<!--<li>-->
										<!--数据源：-->
										<!--<select >-->
										<!--<option value="">请选择数据源</option>-->
										<!--<option value="bch">病虫害数据库</option>-->
										<!--<option value="gc">工程数据库</option>-->
										<!--<option value="stjc">生态检测数据库</option>-->
										<!--</select>-->
										<!--</li>-->
										<li>
											<a class="btn btn-primary btn-rounded btn-sm" onclick="$.table.add()"><i class="fa fa-search"></i>&nbsp;开始</a>
											<a class="btn btn-warning btn-rounded btn-sm" onclick="$.form.reset()"><i class="fa fa-refresh"></i>&nbsp;重置</a>
										</li>
									</ul>
								</div>
							</form>
							<div class="col-sm-12 select-table table-striped">
								<table id="bootstrap-table2"></table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
<th:block th:include="include :: footer" />
<script th:inline="javascript">
    var prefix = ctx + "integration/dataSync";
    $(function() {
        var options = {
            id:"bootstrap-table",
            showSearch: false,
            showToggle: false,
            showColumns: false,
            showRefresh: false,
            url: prefix + "/list",
            sortName: "createTime",
            sortOrder: "desc",
            modalName: "数据同步",
            columns: [{
                field: 'id',
                title: 'ID'
            },
                {
                    field: 'misfirePolicy',
                    title: '执行策略',
                    formatter : function(value,row,index){
                        if(row['misfirePolicy']=='1'){
                            return '立即执行';
                        }else if(row['misfirePolicy']=='2'){
                            return "执行一次";
                        }else if(row['misfirePolicy']=='3') {
                            return "放弃执行"
                        }else{
                            return "error";
                        }
                    }
                },
                {
                    field: 'startTime',
                    title: '开始时间'
                },
                {
                    field: 'endTime',
                    title: '结束时间'
                },
                {
                    field: 'status',
                    title: '状态',
					formatter : function(value,row,index){
                        if(row['status']=='1'){
                            return '执行中';
						}else if(row['status']=='0'){
                            return "未开始";
						}else if(row['status']=='2') {
                            return "完成"
                        }else{
                            return "error";
						}
					}
                }
                // ,
                // {
                //     field: 'dataSource',
                //     title: '数据源',
					// formatter : function(value,row,index){
					// 	if(row['dataSource']=='1'){
					// 		return '病虫害数据库';
					// 	}else if(row['dataSource']=='2') {
					// 		return "工程数据库"
					// 	}else{
					// 		return "error";
					// 	}
					// }
                // }

                ]
        };
        $.table.init(options);




        var options2 = {
            id:"bootstrap-table2",
            showSearch: false,
            showToggle: false,
            showColumns: false,
            showRefresh: false,
            url: prefix + "/list",
            sortName: "createTime",
            sortOrder: "desc",
            modalName: "数据同步",
            columns: [{
                field: 'id',
                title: 'ID'
            },
                {
                    field: 'misfirePolicy',
                    title: '执行策略',
                    formatter : function(value,row,index){
                        if(row['misfirePolicy']=='1'){
                            return '立即执行';
                        }else if(row['misfirePolicy']=='2'){
                            return "执行一次";
                        }else if(row['misfirePolicy']=='3') {
                            return "放弃执行"
                        }else{
                            return "error";
                        }
                    }
                },
                {
                    field: 'startTime',
                    title: '开始时间'
                },
                {
                    field: 'endTime',
                    title: '结束时间'
                },
                {
                    field: 'status',
                    title: '状态',
                    formatter : function(value,row,index){
                        if(row['status']=='1'){
                            return '执行中';
                        }else if(row['status']=='0'){
                            return "未开始";
                        }else if(row['status']=='2') {
                            return "完成"
                        }else{
                            return "error";
                        }
                    }
                }
                // ,
                // {
                //     field: 'dataSource',
                //     title: '数据源',
                //     formatter : function(value,row,index){
                //         if(row['dataSource']=='1'){
                //             return '病虫害数据库';
                //         }else if(row['dataSource']=='2') {
                //             return "工程数据库"
                //         }else{
                //             return "error";
                //         }
                //     }
                // }
				]
        };
        $.table.init(options2);




    });

    layui.use('laydate', function(){
        var laydate = layui.laydate;
        laydate.render({
            elem: '#startTime',
            type: 'datetime',
            trigger: 'click'
        });
    })
    function submitHandler() {
        if ($.validate.form()) {
            $.operate.save(prefix + "/add", $('#form-datasync-add').serialize());
        }
    }
</script>
</body>
</html>
