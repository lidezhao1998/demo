<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" >
<head>
    <th:block th:include="include :: header('新增物资类型')" />
</head>
<body class="white-bg">
    <div class="wrapper wrapper-content animated fadeInRight ibox-content">
        <form class="form-horizontal m" id="form-type-add">
            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group">
                        <label class="col-sm-3 control-label">物资编号：</label>
                        <div class="col-sm-8" id="col-sm-8">
                            <input id="code" name="code" class="form-control" type="text" required>
                            <div id="spanCode"></div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">

                    <div class="form-group">
                        <label class="col-sm-3 control-label">物资类型：</label>
                        <div class="col-sm-8">
                            <input name="materialType" class="form-control" type="text">
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-3 control-label">类别名称：</label>
                    <div class="col-sm-8">
                        <input name="materialName" class="form-control" type="text">
                    </div>
                </div>
                </div>

                <div class="col-sm-6">
                    <div class="form-group">
                        <label class="col-sm-3 control-label">备注：</label>
                        <div class="col-sm-8">
                            <input name="remark" class="form-control" type="text">
                        </div>
                    </div>
                </div>

            </div>

        </form>
    </div>
    <th:block th:include="include :: footer" />
    <script type="text/javascript">
        var prefix = ctx + "system/type";
        $("#form-type-add").validate({
            focusCleanup: true
        });

        function submitHandler() {
            var code= $("#code").val();
            var data= {"code":code}
            $.ajax({
                url: prefix + "/checkCode",
                type: 'post',
                async: false,
                data: data,
                success: function (data) {
                    if (data) {
                        $("#spanCode").html("<span id='spanCode' class=\"btn fileinput-exists\" style=\"color: red;margin-top: -50px; margin-left: 145px;\">编码重复</span>")
                        return
                    } else {
                        if ($.validate.form()) {
                            $.operate.save(prefix + "/add", $('#form-type-add').serialize());
                        }
                    }
                }
            });






        }
    </script>
</body>
</html>